"use strict";(globalThis.webpackChunkblog2=globalThis.webpackChunkblog2||[]).push([[5174],{65244(e,o,t){t.r(o),t.d(o,{assets:()=>a,contentTitle:()=>r,default:()=>l,frontMatter:()=>c,metadata:()=>n,toc:()=>h});var n=t(78600),s=t(62615),i=t(10253);const c={title:"How do you decide if you need a custom React hook",tags:["frontend"],date:new Date("2022-03-06T19:58:46.000Z"),authors:["dhbalaji"]},r=void 0,a={authorsImageUrls:[void 0]},h=[{value:"Is custom hook similar to JS functions?",id:"is-custom-hook-similar-to-js-functions",level:2},{value:"Why custom hook?",id:"why-custom-hook",level:2},{value:"How to test a custom hook?",id:"how-to-test-a-custom-hook",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const o={a:"a",blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:(0,s.jsx)(o.img,{alt:"React developers",src:t(87924).A+"",width:"1280",height:"854"})}),"\n",(0,s.jsx)(o.p,{children:"Hundreds of React tutorials and videos directly start with a custom hook. Here is my experience, where I had to write a custom react hook for the first time. Sharing the rationale and logic behind the first custom react hook."}),"\n",(0,s.jsx)(o.h2,{id:"is-custom-hook-similar-to-js-functions",children:"Is custom hook similar to JS functions?"}),"\n",(0,s.jsxs)(o.p,{children:["Let us say you have 2 react components that have different JSX but a similar/duplicated hooks logic. The code might be the same or similar ",(0,s.jsx)(o.code,{children:"useEffect"})," code or similar operations on ",(0,s.jsx)(o.code,{children:"useState"}),". In that case, we can move the code to a separate React custom hook. This is similar to our ",(0,s.jsx)(o.code,{children:"util"})," pattern. In the ",(0,s.jsx)(o.code,{children:"util"})," pattern we pull out code that was written in multiple places into a single module. Then call the functions from the ",(0,s.jsx)(o.code,{children:"util"})," file. The ",(0,s.jsx)(o.code,{children:"util"})," pattern is good enough for Javascript but React and react fiber is inefficient. We need custom hooks."]}),"\n",(0,s.jsx)(o.p,{children:"Custom hooks have simple rules, to begin with."}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["The name of the custom hook should start with ",(0,s.jsx)(o.code,{children:"use"}),"."]}),"\n",(0,s.jsx)(o.li,{children:"The custom hook can call/make use of other hooks in its body."}),"\n",(0,s.jsx)(o.li,{children:"The custom hook can return any data type like normal functions."}),"\n"]}),"\n",(0,s.jsxs)(o.p,{children:["Writing custom hooks is not different from Javascript functions except for the semantics of the hooks. For instance, the custom hook can be called inside react components, they cannot be inside a branching statement or loop-like any other React hooks. However, we do not have such limitations in ",(0,s.jsx)(o.code,{children:"util"})," methods."]}),"\n",(0,s.jsx)(o.h2,{id:"why-custom-hook",children:"Why custom hook?"}),"\n",(0,s.jsxs)(o.p,{children:["The ",(0,s.jsx)(o.code,{children:"how-to"})," write custom hook has been discussed over and over at conferences and by React influencers many times. In 2022, react developers should be in a position to identify hooks in libraries like ",(0,s.jsx)(o.code,{children:"nextJS"}),". I mean to say, hooks are everywhere. Be it your office code or inside libraries."]}),"\n",(0,s.jsx)(o.p,{children:"Before you write a custom hook, understand why we need one. It's easy to over-engineer the code and make it complex. If your code does not look like a story, something is incorrect."}),"\n",(0,s.jsxs)(o.blockquote,{children:["\n",(0,s.jsx)(o.p,{children:"When you spot repetitive hooks related code, it's an ideal candidate for a custom hook."}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"how-to-test-a-custom-hook",children:"How to test a custom hook?"}),"\n",(0,s.jsxs)(o.p,{children:["This is another area where the ",(0,s.jsx)(o.code,{children:"how-to"})," articles do not meet my expectation. Once you have spotted repetitive React hooks code and built your custom hook. We need to get the hook under the unit test."]}),"\n",(0,s.jsxs)(o.p,{children:["The challenge with testing custom hooks comes with the hook's semantics. The hooks can be called from react components only. The test case or ",(0,s.jsx)(o.code,{children:"it block"})," is not a react component so the custom hook cannot be invoked."]}),"\n",(0,s.jsxs)(o.p,{children:["In ",(0,s.jsx)(o.code,{children:"react testing library"})," we have a method called ",(0,s.jsx)(o.code,{children:"renderHook"}),". According to ",(0,s.jsx)(o.a,{href:"https://react-hooks-testing-library.com/reference/api#renderhook",children:"render hook documentation"}),", the ",(0,s.jsx)(o.code,{children:"renderHook"})," gives a test component or I would say a host component for the custom hook to be rendered."]}),"\n",(0,s.jsxs)(o.p,{children:["The return of ",(0,s.jsx)(o.code,{children:"renderHook"})," is an ",(0,s.jsx)(o.code,{children:"object"}),"."]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-javascript",children:"{\n  all: Array<any>\n  current: any,\n  error: Error\n}\n"})}),"\n",(0,s.jsx)(o.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Deciding on when you should promote your component logic to custom hook is critical for scaling and testing the React code"}),"\n",(0,s.jsx)(o.li,{children:"Writing a custom hook is not scary. It's natural like JS functions with some twists."}),"\n"]})]})}function l(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},87924(e,o,t){t.d(o,{A:()=>n});const n=t.p+"assets/images/react-custom-hooks-developers-1cf73ddca36e2f329c3015d6185f7de9.webp"},10253(e,o,t){t.d(o,{R:()=>c,x:()=>r});var n=t(59471);const s={},i=n.createContext(s);function c(e){const o=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(i.Provider,{value:o},e.children)}},78600(e){e.exports=JSON.parse('{"permalink":"/blog/How-do-you-decide-if-you-need-a-custom-hook","source":"@site/blog/How-do-you-decide-if-you-need-a-custom-hook.md","title":"How do you decide if you need a custom React hook","description":"React developers","date":"2022-03-06T19:58:46.000Z","tags":[{"inline":true,"label":"frontend","permalink":"/blog/tags/frontend"}],"readingTime":2.65,"hasTruncateMarker":true,"authors":[{"name":"D Balaji","title":"Lead Design Technologist","url":"https://github.com/dhbalaji","imageURL":"https://avatars.githubusercontent.com/u/3672491?v=4","key":"dhbalaji","page":null}],"frontMatter":{"title":"How do you decide if you need a custom React hook","tags":["frontend"],"date":"2022-03-06T19:58:46.000Z","authors":["dhbalaji"]},"unlisted":false,"prevItem":{"title":"Day 1: Learning remix, setup and issues discussed","permalink":"/blog/Day-1-Learning-remix-setup-and-issues-discussed"},"nextItem":{"title":"Why do we need React.forwardRef","permalink":"/blog/Why-do-we-need-React-forwardRef"}}')}}]);